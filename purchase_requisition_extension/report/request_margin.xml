<odoo>
    <data>

        <record id="report_margin_tree_view" model="ir.ui.view">
			<field name="name">report.purchase.margin.tree</field>
			<field name="model">report.purchase.margin</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="margin report" create="false" edit="false" delete="false">
					<field name="order_ref" />
					<field name="section_id" />
					<field name="order_date" />
					<field name="cout_global" />
					<field name="cout_engage" />
					<field name="total_marge" />
					<field name="marge_pourcent"/>

				</tree>
			</field>
		</record>

		<record id="report_margin_search_view" model="ir.ui.view">
			<field name="name">report.purchase.margin.search</field>
			<field name="model">report.purchase.margin</field>
			<field name="arch" type="xml">
				<search string="Search">
					<field name="order_ref" />
					<field name="section_id" />
					<field name="order_date" />

					<group expand="0" string="Grouper par...">
						<filter string="Référence commande" domain="[]" context="{'group_by':'order_ref'}" />
						<filter string="Section" name="section" domain="[]" context="{'group_by':'section_id'}" />
						<filter string="Date de commande" domain="[]" context="{'group_by':'order_date'}" />
					</group>
				</search>
			</field>
		</record>

		<record model="ir.ui.view" id="report_margin_view_graph">
			<field name="name">report.purchase.margin.graph</field>
			<field name="model">report.purchase.margin</field>
			<field name="arch" type="xml">
				<graph string="Graph View">
					<field name="order_ref" />
					<field name="section_id" />
					<field name="order_date" />
					<field name="cout_global" type="measure"/>
					<field name="cout_engage" type="measure"/>
					<field name="total_marge" type="measure"/>
                    <field name="marge_pourcent" type="measure"/>
				</graph>
			</field>
		</record>

        <record model="ir.actions.act_window" id="action_report_margin">
			<field name="name">Rapport de marge des comptes mouvementés</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">report.purchase.margin</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,pivot,graph</field>
			<field name="context">{'search_default_section': 1}</field>

		</record>

		<menuitem id="report_margin_menu" name="Rapport de marge par activité" sequence="20"
		    parent="report_menu_main" action="action_report_margin"/>

    </data>
</odoo>